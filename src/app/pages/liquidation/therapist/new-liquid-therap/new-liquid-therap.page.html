<ion-content padding fullscreen>
  <ion-grid fixed>
    <ion-col size="12" size-lg="3" size-md="5" size-sm="6" size-xs="12" id="location">

      <div class="nueva-liquidaci-n">
        <div class="rectangle-93" id="overview"></div>
        <div class="rectangle-92"></div>
        <div class="rectangle-30" id="overviewDates"></div>

        <div class="nueva-liquidaci-n2"> Nueva Liquidación </div>

        <svg class="x-close" width="12" height="24" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"
          (click)="back()">
          <path d="M20.25 6.75L6.75 20.25M6.75 6.75L20.25 20.25" stroke="#3C3C3C" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <div class="component-7">
          <div class="rectangle-34"></div>

          <svg class="icon3" width="19" height="9" viewBox="0 0 19 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M-4.76837e-07 -8.30516e-07L9.5 9L19 0" stroke="white" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>

          <ion-select [(ngModel)]="modelLiquidation.terapeuta" class="terapeuta"
            style="display: grid; min-height: -webkit-fill-available" label="Terapeuta"
            (ngModelChange)="calculateServices()">
            <ion-select-option *ngFor="let therapist of terapeuta"
              [value]="therapist.name">{{therapist.nombre}}</ion-select-option>
          </ion-select>
        </div>

        <div class="component-82" *ngIf="administratorRole">
          <div class="rectangle-34"></div>

          <svg class="icon2" width="19" height="9" viewBox="0 0 19 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M-4.76837e-07 -8.30516e-07L9.5 9L19 0" stroke="white" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>

          <ion-select [(ngModel)]="modelLiquidation.encargada" class="encargada"
            style="display: grid; min-height: -webkit-fill-available" label="Encargada"
            (ngModelChange)="calculateServices()">
            <ion-select-option *ngFor="let managers of manager"
              [value]="managers.nombre">{{managers.nombre}}</ion-select-option>
          </ion-select>
        </div>

        <div class="component-82" *ngIf="!administratorRole">
          <div class="rectangle-34"></div>

          <svg class="icon2" width="19" height="9" viewBox="0 0 19 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M-4.76837e-07 -8.30516e-07L9.5 9L19 0" stroke="white" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>

          <ion-select [(ngModel)]="modelLiquidation.encargada" class="encargada"
            style="display: grid; min-height: -webkit-fill-available" label="Encargada">
            <ion-select-option *ngFor="let managers of manager"
              [value]="managers.nombre">{{managers.nombre}}</ion-select-option>
          </ion-select>
        </div>

        <div class="component-3" *ngIf="selected">
          <ion-input type="date" class="inicial" id="sinceDate" name="sinceDate" label="Inicial"
            (change)="inputDateAndTime()" [(ngModel)]="modelLiquidation.desdeFechaLiquidado"
            [value]="modelLiquidation.desdeFechaLiquidado"></ion-input>
        </div>

        <div class="component-9" *ngIf="selected">
          <ion-input type="time" min="18:00" max="21:00" step="3600" class="_5-34-p-m" id="sinceTime" name="sinceTime"
            label="Inicial" (change)="inputDateAndTime()" [(ngModel)]="modelLiquidation.desdeHoraLiquidado"
            [value]="modelLiquidation.desdeHoraLiquidado"></ion-input>
        </div>

        <div class="component-8" *ngIf="selected">
          <ion-input type="date" class="final" id="toDate" name="toDate" label="Final" (change)="inputDateAndTime()"
            [(ngModel)]="modelLiquidation.hastaFechaLiquidado"
            [value]="modelLiquidation.hastaFechaLiquidado"></ion-input>
        </div>

        <div class="component-10" *ngIf="selected">
          <ion-input type="time" min="18:00" max="21:00" step="3600" class="_7-12-p-m" id="untilTime" name="untilTime"
            label="Final" (change)="inputDateAndTime()" [(ngModel)]="modelLiquidation.hastaHoraLiquidado"
            [value]="modelLiquidation.hastaHoraLiquidado"></ion-input>
        </div>

        <div *ngIf="dates">
          <div class="total-liquidaci-n"> TOTAL LIQUIDACIÓN </div>
          <div class="_0">{{totalLiquidation}} €</div>

          <div class="rectangle-42"></div>
          <div class="concepto-a-regularizar">Concepto a regularizar</div>
          <div class="rectangle-94"></div>
          <div class="div">€</div>
          <ion-input type="number" class="rectangle-94" id="numberRegularization" name="numberRegularization"
            (change)="regularization($event)"></ion-input>

          <!-- Table -->

          <div class="frame-79">
            <div>
              <div class="rectangle-1005" id="rectangle1005"></div>
              <div class="fecha">Fecha</div>
              <div class="tiempo">Tiempo</div>
              <div class="minutos">Minutos</div>
              <div class="tratamiento3">Tratamiento</div>
              <div class="salida1">Salida</div>
              <div class="_propina">Propina</div>
              <div class="_pago">Pago</div>
              <div class="a-terapeuta10">A terapeuta</div>
              <div class="bebida-casa10">Bebida casa</div>
              <div class="bebida-terap10">Bebida terap</div>
              <div class="tabaco10">Tabaco</div>
              <div class="vitamina10">Vitamina</div>
              <div class="otros10">Otros</div>
            </div>

            <div class="rectangle-1004" *ngFor="let services of (unliquidatedService ) | 
            paginate: { itemsPerPage: 5, currentPage: page }" (click)="edit(services.id)">
              <div style="position: relative; top: 0px">

                <div [ngClass]="{'color2':services.nota !== ''}" (click)="notes()"> </div>
                <div class="luc-a9">{{services.fecha}}</div>
                <div class="tiempo2">{{services.horaStart + ' - ' + services.horaEnd}}</div>
                <div class="min">{{services.minuto + ' min'}}</div>
                <div class="_1000">{{services.servicio }} €</div>
                <div class="salida">{{services.salida}}</div>
                <div class="_10001"> {{services.propina}} €</div>
                <div class="_bizum">{{services.formaPago}}</div>
                <div class="a-terapeuta9">{{services.numberTerap}} €</div>
                <div class="bebida-casa9">{{services.bebidas}} €</div>
                <div class="bebida-terap9">{{services.bebidaTerap}} €</div>
                <div class="tabaco9">{{services.tabaco}} €</div>
                <div class="vitamina9">{{services.vitaminas}} €</div>
                <div class="otros9">{{services.otros}} €</div>
              </div>
            </div>
          </div>

          <pagination-controls class="paginator" previousLabel="" nextLabel=""
            (pageChange)="page = $event"></pagination-controls>

          <div class="rectangle-200">
            <div class="suma">Suma</div>
            <div class="comisi-n">Comisión</div>
            <div class="total">Total</div>
            <div class="rectangle-108"></div>

            <div class="tratamiento">Tratamiento</div>
            <div class="_222">{{totalService}} €</div>
            <div class="_100" *ngIf="terapeutaName?.servicio != undefined"> {{terapeutaName?.servicio + ' %'}}</div>
            <div class="_100" *ngIf="terapeutaName?.servicio == undefined">{{0 + ' %'}}</div>
            <div class="_2222">{{totalTreatment}} €</div>

            <div class="propina">Propina</div>
            <div class="_03">{{totalTipValue}} €</div>
            <div class="_1003" *ngIf="terapeutaName?.propina != undefined"> {{terapeutaName?.propina + ' %'}}</div>
            <div class="_1003" *ngIf="terapeutaName?.propina == undefined">{{0 + ' %'}}</div>
            <div class="_04">{{totalTip}} €</div>

            <div class="bebida-a-casa">Bebida a casa</div>
            <div class="_07">{{totalValueDrink}} €</div>
            <div class="_50" *ngIf="terapeutaName?.bebida != undefined"> {{terapeutaName?.bebida + ' %'}}</div>
            <div class="_50" *ngIf="terapeutaName?.bebida == undefined">{{0 + ' %'}}</div>
            <div class="_08">{{totalDrink}} €</div>

            <div class="bebida-terap">Bebida Terap</div>
            <div class="_010">{{totalValueDrinkTherap}} €</div>
            <div class="_90" *ngIf="terapeutaName?.bebidaTerap != undefined"> {{terapeutaName?.bebidaTerap + ' %'}}
            </div>
            <div class="_90" *ngIf="terapeutaName?.bebidaTerap == undefined">{{0 + ' %'}}</div>
            <div class="_011">{{totalDrinkTherap}} €</div>

            <div class="tabaco">Tabaco</div>
            <div class="_014">{{totalTobaccoValue}} €</div>
            <div class="_10031" *ngIf="terapeutaName?.tabaco != undefined"> {{terapeutaName?.tabaco + ' %'}}</div>
            <div class="_10031" *ngIf="terapeutaName?.tabaco == undefined">{{0 + ' %'}}</div>
            <div class="_015">{{totalTobacco}} €</div>

            <div class="vitamina">Vitamina</div>
            <div class="_016">{{totalValueVitamins}} €</div>
            <div class="_1004" *ngIf="terapeutaName?.vitamina != undefined"> {{terapeutaName?.vitamina + ' %'}}</div>
            <div class="_1004" *ngIf="terapeutaName?.vitamina == undefined">{{0 + ' %'}}</div>
            <div class="_017">{{totalVitamin}} €</div>

            <div class="otros">Otros</div>
            <div class="_018">{{totalValueOther}} €</div>
            <div class="_1005" *ngIf="terapeutaName?.otros != undefined"> {{terapeutaName?.otros + ' %'}}</div>
            <div class="_1005" *ngIf="terapeutaName?.otros == undefined">{{0 + ' %'}}</div>
            <div class="_019">{{totalOther}} €</div>

            <div class="suma2">Suma</div>
            <div class="_2223">{{totalSum}} €</div>

            <div class="recibido">Recibido</div>
            <div class="_06">{{totalReceived}} €</div>

            <div class="rectangle-109"></div>

            <div class="total-a-pagar">Total a pagar</div>
            <div class="_2224">{{totalLiquidation}} €</div>

            <!-- Table3 -->
            <div class="pagado-al-terapeuta">Pagado al terapeuta</div>
            <div class="rectangle-110"></div>

            <div class="efectivo">Efectivo</div>
            <div class="_02">0€</div>

            <div class="bizum">Bizum</div>
            <div class="_05">0€</div>

            <div class="tarjeta">Tarjeta</div>
            <div class="_09">0€</div>

            <div class="transferencia">Transferencia</div>
            <div class="_012">0€</div>

            <div class="rectangle-111"></div>

            <div class="total-a-pagar2">Total a pagar</div>
            <div class="_013">0€</div>

            <div class="m-todo-de-pago-al-terapeuta">Método de pago al Terapeuta</div>

            <div class="group-40">
              <div class="group-52">
                <div class="rectangle-41" id="bizum1"></div>
                <ion-input class="rectangle-41" id="Bizum" name="bizum" [(ngModel)]="modelLiquidation.formaPago"
                  (click)="bizum()"></ion-input>
                <div class="bizum2">Bizum</div>
              </div>

              <div class="group-53">
                <div class="rectangle-37" id="cash1"></div>
                <ion-input class="rectangle-37" id="cash" name="cash" [(ngModel)]="modelLiquidation.formaPago"
                  (click)="cash()"></ion-input>
                <div class="efectivo2">Efectivo</div>
              </div>

              <div class="group-54">
                <div class="rectangle-39" id="card1"></div>
                <ion-input class="rectangle-39" id="card" name="card" [(ngModel)]="modelLiquidation.formaPago"
                  (click)="card()"></ion-input>
                <div class="tarjeta2">Tarjeta</div>
              </div>

              <div class="group-55">
                <div class="rectangle-40" id="transaction1"></div>
                <ion-input class="rectangle-40" id="transaction" name="transaction"
                  [(ngModel)]="modelLiquidation.formaPago" (click)="transaction()"></ion-input>
                <div class="transferencia2">Transferencia</div>
              </div>
            </div>

            <div class="rectangle-77"></div>
            <div class="group-30">
              <div class="guardar">Guardar</div>

              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="24" viewBox="0 0 22 24" fill="none"
                class="save">
                <path
                  d="M18.9842 9.2984L13.4842 3.46272C13.3997 3.37523 13.3001 3.30588 13.1908 3.25847C13.0772 3.20947 12.956 3.18309 12.8333 3.18066H5.5C4.77065 3.18066 4.07118 3.48808 3.55546 4.03528C3.03973 4.58248 2.75 5.32465 2.75 6.0985V17.7699C2.75 18.5437 3.03973 19.2859 3.55546 19.8331C4.07118 20.3803 4.77065 20.6877 5.5 20.6877H16.5C17.2293 20.6877 17.9288 20.3803 18.4445 19.8331C18.9603 19.2859 19.25 18.5437 19.25 17.7699V9.98896C19.2507 9.86096 19.2276 9.73407 19.182 9.61557C19.1363 9.49707 19.0691 9.38928 18.9842 9.2984ZM8.25 5.12589H11.9167V7.07112H8.25V5.12589ZM13.75 18.7425H8.25V15.8246C8.25 15.5667 8.34658 15.3193 8.51849 15.1369C8.69039 14.9545 8.92355 14.852 9.16667 14.852H12.8333C13.0764 14.852 13.3096 14.9545 13.4815 15.1369C13.6534 15.3193 13.75 15.5667 13.75 15.8246V18.7425ZM17.4167 17.7699C17.4167 18.0278 17.3201 18.2752 17.1482 18.4576C16.9763 18.64 16.7431 18.7425 16.5 18.7425H15.5833V15.8246C15.5833 15.0508 15.2936 14.3086 14.7779 13.7614C14.2622 13.2142 13.5627 12.9068 12.8333 12.9068H9.16667C8.43732 12.9068 7.73785 13.2142 7.22212 13.7614C6.7064 14.3086 6.41667 15.0508 6.41667 15.8246V18.7425H5.5C5.25688 18.7425 5.02373 18.64 4.85182 18.4576C4.67991 18.2752 4.58333 18.0278 4.58333 17.7699V6.0985C4.58333 5.84055 4.67991 5.59316 4.85182 5.41076C5.02373 5.22836 5.25688 5.12589 5.5 5.12589H6.41667V8.04373C6.41667 8.30168 6.51324 8.54907 6.68515 8.73147C6.85706 8.91387 7.09022 9.01635 7.33333 9.01635H12.8333C13.0764 9.01635 13.3096 8.91387 13.4815 8.73147C13.6534 8.54907 13.75 8.30168 13.75 8.04373V6.49728L17.4167 10.3877V17.7699Z"
                  fill="white" />
              </svg>
            </div>
          </div>
        </div>

        <div class="keyboard"></div>
      </div>

    </ion-col>
  </ion-grid>
</ion-content>