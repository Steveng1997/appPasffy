<ion-content padding fullscreen>
  <ion-grid fixed>
    <ion-row size="12" size-xs="12" size-sm="6" size-md="4" size-lg="3" size-xl="3">

      <div class="liquidaci-n-terapeuta">
        <div class="rectangle-93"></div>
        <div class="rectangle-92"></div>
        <div class="liquidaci-n">Liquidación</div>

        <div class="containerLiquidation">
          <div class="rectangle-18"></div>
          <div class="rectangle-94"></div>
          <div class="terapeuta">Terapeuta</div>
          <div class="encargada" (click)="goManager()">Encargada</div>
        </div>

        <div class="group-2">
          <div *ngIf="!today" class="_28-de-enero">{{day}} de {{month}}</div>
          <div *ngIf="today" class="_28-de-enero">{{dateTodayCurrent}}</div>
          <div class="rectangle-10"></div>
        </div>

        <svg class="icon2" width="12" height="24" viewBox="0 0 12 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 24L12 12L0 0" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <svg class="icon3" width="12" height="24" viewBox="0 0 12 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 0L1.04907e-06 12L12 24" stroke="white" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>

        <div class="filtros" (click)="btnFilter()">Filtros</div>
        <svg class="icon" width="25" height="23" viewBox="0 0 25 23" fill="none" xmlns="http://www.w3.org/2000/svg"
          (click)="btnFilter()">
          <path
            d="M1.47178 3.45413C0.503441 2.35927 0.0192734 1.81184 0.00101043 1.34659C-0.0148546 0.942435 0.156827 0.553983 0.465134 0.296454C0.82004 0 1.54615 0 2.99838 0H22.0016C23.4538 0 24.18 0 24.5349 0.296454C24.8432 0.553983 25.0149 0.942435 24.999 1.34659C24.9807 1.81184 24.4966 2.35927 23.5282 3.45413L16.2226 11.7143C16.0296 11.9326 15.933 12.0417 15.8642 12.1659C15.8032 12.276 15.7584 12.3946 15.7313 12.5179C15.7007 12.6569 15.7007 12.8033 15.7007 13.0961V20.0217C15.7007 20.275 15.7007 20.4016 15.6603 20.5111C15.6247 20.6079 15.5666 20.6946 15.4911 20.764C15.4056 20.8426 15.2894 20.8896 15.0569 20.9837L10.7039 22.7452C10.2333 22.9356 9.99805 23.0308 9.80918 22.9911C9.64401 22.9564 9.49907 22.8571 9.40586 22.7149C9.29928 22.5522 9.29928 22.2958 9.29928 21.7831V13.0961C9.29928 12.8033 9.29928 12.6569 9.26871 12.5179C9.24159 12.3946 9.19681 12.276 9.13577 12.1659C9.06695 12.0417 8.97044 11.9326 8.77741 11.7143L1.47178 3.45413Z"
            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <div class="rectangle-95"></div>
        <div class="nueva">Nueva</div>
        <svg class="x-circle" width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_1_546)">
            <path
              d="M25.631 20.5646L15.3786 20.4449M20.5647 15.3786L20.4449 25.6309M28.9486 29.1481C24.175 33.8115 16.5248 33.7222 11.8614 28.9486C7.19799 24.175 7.28733 16.5247 12.0609 11.8613C16.8346 7.19792 24.4848 7.28726 29.1482 12.0609C33.8116 16.8345 33.7223 24.4847 28.9486 29.1481Z"
              stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </g>
          <defs>
            <clipPath id="clip0_1_546">
              <rect width="29" height="29" fill="white" transform="translate(20.7441) rotate(45.6691)" />
            </clipPath>
          </defs>
        </svg>

        <div class="frame-77">
          <div>
            <div class="rectangle-105" id="rectangle105"></div>
            <div class="encargada2">Encargada</div>
            <div class="terapeuta2">Terapeuta</div>
            <div class="importe">Importe</div>
            <div class="desde">Desde</div>
            <div class="hasta">Hasta</div>
            <div class="pago">Pago</div>
            <div class="tratamiento">Tratamiento</div>
          </div>

          <div class="rectangle-104" *ngFor="let liquidation of (liquidated | therapist: selectedTerapeuta  
          | manager: selectedEncargada | dateLiquidation: dateStart:dateEnd ) | 
          paginate: { itemsPerPage: 12, currentPage: page }" (click)="detail(liquidation.idTerapeuta)">
            <div style="position: relative; top: 0px">
              <div class="luc-a9">{{liquidation.encargada}}</div>

              <div class="laura9">{{liquidation.terapeuta}}</div>

              <div class="_5-15-6-239">{{liquidation.importe + ' €'}}</div>

              <div class="_22-01-24-23-25"> {{liquidation.desdeFechaLiquidado + ' - ' +
                liquidation.desdeHoraLiquidado}} </div>

              <div class="_22-01-24-23-2517">{{liquidation.hastaFechaLiquidado + ' - '
                + liquidation.hastaHoraLiquidado}}</div>

              <div class="tarjeta"> {{liquidation.formaPago}} </div>

              <div class="_1">{{liquidation.tratamiento}}</div>
            </div>
          </div>
        </div>

        <pagination-controls class="paginator" previousLabel="" nextLabel=""
          (pageChange)="page = $event"></pagination-controls>


      </div>
    </ion-row>
  </ion-grid>
</ion-content>

<!-- Filter -->

<div class="pop-up-filtros" *ngIf="filter">

  <div class="rectangle-30"></div>
  <div class="_filtros">Filtros</div>
  <div class="rectangle-41"></div>

  <svg class="vector-6" width="59" height="2" viewBox="0 0 59 2" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 1L59 0.999995" stroke="#3C3C3C" />
  </svg>

  <div class="limpiar" id="btnDelete" (click)="emptyFilter()">Limpiar</div>
  <div class="filtrar" (click)="btnFilter()">Filtrar</div>

  <div class="_terapeuta">Terapeuta</div>
  <div class="_encargada">Encargada</div>
  <div class="inicial">Inicial</div>
  <div class="final">Final</div>

  <svg class="x-close" width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"
    (click)="btnFilter()">
    <path d="M20.25 6.75L6.75 20.25M6.75 6.75L20.25 20.25" stroke="#3C3C3C" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round" />
  </svg>

  <div class="component-7">
    <div class="rectangle-34"></div>
    <ion-select class="seleccionar" style="display: grid; min-height: -webkit-fill-available" placeholder="Selecciona"
      [(ngModel)]="selectedTerapeuta" (ngModelChange)="filters()">
      <ion-select-option *ngFor="let therapist of terapeuta">{{therapist.nombre}}</ion-select-option>
    </ion-select>
  </div>

  <div class="component-8">
    <div class="rectangle-34-1"></div>
    <ion-select class="seleccionar_1" style="display: grid; min-height: -webkit-fill-available" placeholder="Selecciona"
      [(ngModel)]="selectedEncargada" (ngModelChange)="filters()">
      <ion-select-option *ngFor="let manager of manager">{{manager.nombre}}</ion-select-option>
    </ion-select>
  </div>

  <div class="rectangle-154"></div>
  <ion-input class="_02-feb-2024" type="date" name="dateStart" [(ngModel)]="dateStart" [value]="CurrenDate"
    (ngModelChange)="filters()"></ion-input>

  <div class="rectangle-155"></div>
  <ion-input class="_10-12-a-m" type="time" name="hourStart" [(ngModel)]="hourStart" [value]="CurrenDate"
    (ngModelChange)="filters()"></ion-input>

  <div class="rectangle-156"></div>
  <ion-input class="_02-feb-20242" type="date" name="dateEnd" [(ngModel)]="dateEnd"
    (ngModelChange)="filters()"></ion-input>

  <div class="rectangle-157"></div>
  <ion-input class="_08-02-p-m" type="time" name="hourEnd" [(ngModel)]="hourEnd"
    (ngModelChange)="filters()"></ion-input>
</div>

<!-- Details -->

<div class="pop-up-liquidaci-n" *ngIf="details">
  <div class="rectangle-106">
    <div class="containerDetail">
      <div class="rectangle-107"></div>
      <div class="rectangle-112"></div>
      <div class="liquidaci-n-1">Liquidación</div>

      <div class="_22-01-24-23-25-a-05-02-24-09-14"> {{sinceDate}} {{sinceTime}} a {{toDate}} {{untilTime}} </div>

      <div class="total-liquidaci-n-222-concepto-a-regularizar-0-tipo-de-pago-tarjeta">
        <span>

          <span class="total-liquidaci-n-222-concepto-a-regularizar-0-tipo-de-pago-tarjeta-span"> Total Liquidación:
          </span>

          <span class="total-liquidaci-n-222-concepto-a-regularizar-0-tipo-de-pago-tarjeta-span2">
            {{totalLiquidation}} €
            <br />
          </span>

          <span class="total-liquidaci-n-222-concepto-a-regularizar-0-tipo-de-pago-tarjeta-span3">
            Concepto a regularizar: {{regularization}} €
          </span>

          <span class="total-liquidaci-n-222-concepto-a-regularizar-0-tipo-de-pago">
            Tipo de pago:
          </span>

          <span class="total-liquidaci-n-222-concepto-a-regularizar-0-tipo-de-pago-tarjeta-span4"> {{payment}}
          </span>

        </span>
      </div>

      <div class="luc-a">{{nameTherapist}}</div>

      <div class="suma">Suma</div>
      <div class="comisi-n">Comisión</div>
      <div class="total">Total</div>
      <div class="rectangle-108"></div>

      <div class="_tratamiento">Tratamiento</div>
      <div class="_222">{{totalService}} €</div>
      <div class="_100" *ngIf="terapeutaName?.servicio != undefined"> {{terapeutaName?.servicio + ' %'}}</div>
      <div class="_100" *ngIf="terapeutaName?.servicio == undefined" class="columnComission">{{0 + ' %'}}</div>
      <div class="_2223">{{serviceCommission}} €</div>

      <div class="propina">Propina</div>
      <div class="_0">{{totalTipValue}} €</div>
      <div class="_1003">{{commissionTip}} %</div>
      <div class="_03">0€</div>

      <div class="bebida-a-casa">Bebida a casa</div>
      <div class="_06">{{totalValueDrink}} €</div>
      <div class="_50">{{beverageCommission}} %</div>
      <div class="_08">0€</div>

      <div class="bebida-terap">Bebida Terap</div>
      <div class="_010">{{totalValueDrinkTherap}} €</div>
      <div class="_90">{{beverageTherapistCommission}} %</div>
      <div class="_012">0€</div>

      <div class="tabaco">Tabaco</div>
      <div class="_015">{{totalTobaccoValue}} €</div>
      <div class="_1005">{{tobaccoCommission}} %</div>
      <div class="_016">0€</div>

      <div class="vitamina">Vitamina</div>
      <div class="_017">{{totalValueVitamins}} €</div>
      <div class="_1006">{{vitaminCommission}} %</div>
      <div class="_018">0€</div>

      <div class="otros">Otros</div>
      <div class="_019">{{totalValueOther}} €</div>
      <div class="_1007">{{commissionOthers}} %</div>
      <div class="_020">0€</div>

      <div class="suma2">Suma</div>
      <div class="_2225">{{totalSum}} €</div>

      <div class="recibido">Recibido</div>
      <div class="_05">{{totalReceived}} €</div>

      <!-- Raya -->
      <div class="rectangle-109"></div>

      <div class="total-a-pagar">Total a pagar</div>
      <div class="_2226">{{totalLiquidation}} €</div>

      <!-- Segunda Tabla -->
      <div class="pagado-al-terapeuta">Pagado al terapeuta</div>

      <!-- Raya -->
      <div class="rectangle-110"></div>


      <div class="efectivo">Efectivo</div>
      <div class="_2222">222€</div>
      <div class="_1002">100%</div>
      <div class="_2224">222€</div>

      <div class="bizum">Bizum</div>
      <div class="_02">0€</div>
      <div class="_1004">100%</div>
      <div class="_04">0€</div>

      <div class="tarjeta">Tarjeta</div>
      <div class="_07">0€</div>
      <div class="_502">50%</div>
      <div class="_09">0€</div>

      <div class="transferencia">Transferencia</div>
      <div class="_011">0€</div>
      <div class="_902">90%</div>
      <div class="_013">0€</div>

      <!-- Raya -->
      <div class="rectangle-111"></div>

      <div class="total-a-pagar2">Total a pagar</div>
      <div class="_014">0€</div>

      <div class="eliminar">Eliminar</div>
      <img class="trash-03" src="trash-030.svg" />

      <svg class="x-close-1" width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"
        (click)="detail('null')">
        <path d="M20.25 6.75L6.75 20.25M6.75 6.75L20.25 20.25" stroke="#3C3C3C" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
      </svg>
    </div>

  </div>
</div>