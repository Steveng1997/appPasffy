<ion-content padding fullscreen>
  <ion-grid fixed>
    <ion-row size="12" size-xs="12" size-sm="6" size-md="4" size-lg="3" size-xl="3">

      <div class="servicios-1">
        <div class="rectangle-93"></div>
        <div class="rectangle-92"></div>
        <div class="servicios-realizados">Servicios Realizados</div>

        <svg class="capa-1" width="27" height="29" viewBox="0 0 27 29" fill="none" xmlns="http://www.w3.org/2000/svg"
          (click)="exportExcel()">
          <g clip-path="url(#clip0_226_317)">

            <path
              d="M2.75891 21.5835C2.17874 21.5835 1.65005 21.5861 1.12139 21.5828C0.429787 21.5785 0.00319044 21.1757 0.00261256 20.5042C-0.000834796 16.4991 -0.000956773 12.4939 0.00276222 8.48873C0.00338768 7.81465 0.426186 7.4206 1.12639 7.41675C1.65469 7.41384 2.18301 7.41617 2.75891 7.41617C2.75891 7.27398 2.75891 7.15254 2.75891 7.0311C2.75898 5.50281 2.75254 3.97448 2.76117 2.44624C2.76804 1.22831 3.53135 0.287117 4.69883 0.0478461C4.90804 0.00496963 5.12863 0.00228664 5.34397 0.00220991C11.7035 -4.22133e-05 18.063 -0.000977297 24.4225 0.00135746C25.9866 0.00193167 26.9977 0.988665 26.9982 2.51769C27.0006 10.507 27.0007 18.4962 26.9981 26.4855C26.9976 28.0121 25.9842 28.9977 24.4182 28.9983C18.0587 29.0006 11.6992 29.0006 5.33973 28.9983C3.77586 28.9977 2.76396 28.0096 2.75985 26.4853C2.75578 24.9781 2.75893 23.4709 2.75891 21.9637C2.75891 21.8497 2.75891 21.7357 2.75891 21.5835ZM4.8515 21.5835C4.8452 21.7153 4.8361 21.8179 4.83603 21.9205C4.83511 23.4171 4.83495 24.9138 4.83566 26.4105C4.83589 26.9014 4.91225 26.9755 5.41894 26.9755C11.7243 26.9758 18.0297 26.9758 24.335 26.9755C24.8442 26.9755 24.9225 26.9011 24.9226 26.4142C24.923 18.4671 24.923 10.5201 24.9225 2.57305C24.9225 2.10449 24.8391 2.02426 24.3552 2.02423C18.039 2.02381 11.7228 2.02382 5.40666 2.02421C4.91896 2.02424 4.8361 2.10306 4.83579 2.56912C4.83477 4.07631 4.83541 5.58351 4.83541 7.09071V7.41614H5.26642C7.93782 7.41614 10.6092 7.41596 13.2806 7.41625C14.1412 7.41634 14.5376 7.79547 14.5378 8.62449C14.5387 12.5453 14.5388 16.4661 14.5377 20.3869C14.5374 21.2026 14.142 21.5832 13.3012 21.5833C10.619 21.5838 7.93678 21.5835 5.25457 21.5835H4.8515ZM2.10308 9.44907V19.54H12.4354V9.44907H2.10308Z"
              fill="white" />

            <path
              d="M19.7199 14.8315C19.0498 14.8315 18.3796 14.8366 17.7095 14.83C17.062 14.8237 16.6186 14.4103 16.6179 13.8266C16.6172 13.2436 17.0585 12.816 17.7039 12.8115C19.0548 12.802 20.406 12.8014 21.757 12.8119C22.3857 12.8168 22.8525 13.275 22.8427 13.838C22.8327 14.4104 22.3743 14.8198 21.7303 14.8315C21.7087 14.8319 21.687 14.8317 21.6654 14.8317C21.0169 14.8317 20.3684 14.8317 19.7199 14.8315Z"
              fill="white" />

            <path
              d="M19.7165 20.2388C19.0355 20.2388 18.3544 20.2483 17.6737 20.2357C17.1604 20.2262 16.7496 19.9084 16.6416 19.4728C16.5298 19.0218 16.7283 18.5514 17.1489 18.3456C17.3066 18.2685 17.4981 18.2232 17.6747 18.2219C19.0365 18.212 20.3985 18.2118 21.7604 18.2184C22.379 18.2214 22.8313 18.6458 22.8425 19.2074C22.8536 19.7594 22.4016 20.2184 21.7916 20.2339C21.1003 20.2515 20.4082 20.238 19.7165 20.2388Z"
              fill="white" />

            <path
              d="M20.7528 7.41689C21.0987 7.41689 21.4447 7.41073 21.7903 7.41826C22.3898 7.43131 22.8522 7.88549 22.842 8.44154C22.8318 8.99176 22.3831 9.42877 21.7957 9.43713C21.1041 9.44697 20.4122 9.44798 19.7206 9.43679C19.1306 9.42724 18.6958 8.98912 18.6948 8.42994C18.6938 7.86873 19.1256 7.43544 19.7153 7.4189C20.0609 7.4092 20.4069 7.41713 20.7528 7.41689Z"
              fill="white" />

            <path
              d="M7.28495 15.9076C6.81981 16.3625 6.39385 16.7785 5.96849 17.1951C5.68984 17.4681 5.35762 17.5943 4.96655 17.511C4.17422 17.3422 3.88812 16.4134 4.44573 15.8212C4.65749 15.5963 4.88383 15.3841 5.10934 15.172C5.33399 14.9606 5.56594 14.7567 5.82376 14.5232C5.3658 14.0779 4.934 13.683 4.53562 13.2584C4.37558 13.0878 4.23209 12.8643 4.1808 12.643C4.077 12.195 4.30582 11.7896 4.70237 11.5846C5.09821 11.3801 5.56137 11.4291 5.90159 11.7478C6.35316 12.1708 6.78524 12.6136 7.26194 13.0835C7.70954 12.6435 8.13984 12.2205 8.57005 11.7974C8.84927 11.5228 9.18262 11.4043 9.57335 11.4932C10.3662 11.6738 10.6448 12.5945 10.073 13.1867C9.6514 13.6234 9.19646 14.0295 8.72019 14.4837C9.00688 14.7638 9.27018 15.0208 9.53327 15.2781C9.71641 15.4571 9.90629 15.6302 10.0808 15.817C10.4797 16.2438 10.4719 16.8534 10.0711 17.241C9.66658 17.6321 9.0486 17.6354 8.61213 17.2394C8.38283 17.0313 8.1642 16.8118 7.94599 16.5925C7.72864 16.3741 7.51785 16.1495 7.28495 15.9076Z"
              fill="white" />

          </g>
          <defs>
            <clipPath id="clip0_226_317">
              <rect width="27" height="29" fill="white" />
            </clipPath>
          </defs>
        </svg>

        <svg class="icon" width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg"
          (click)="search()">
          <path
            d="M23 23L17.4417 17.4417M20.4444 10.2222C20.4444 15.8678 15.8678 20.4444 10.2222 20.4444C4.57664 20.4444 0 15.8678 0 10.2222C0 4.57664 4.57664 0 10.2222 0C15.8678 0 20.4444 4.57664 20.4444 10.2222Z"
            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <ion-input *ngIf="textSearch" class="textSearch" type="text" name="search" [(ngModel)]="filterSearch"
          (ngModelChange)="textsearch()"></ion-input>

        <svg class="icon2" width="25" height="23" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg"
          (click)="btnFilter()">
          <path fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"
            d="M368 128h80M64 128h240M368 384h80M64 384h240M208 256h240M64 256h80" />
          <circle cx="336" cy="128" r="32" fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round"
            stroke-width="32" />
          <circle cx="176" cy="256" r="32" fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round"
            stroke-width="32" />
          <circle cx="336" cy="384" r="32" fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round"
            stroke-width="32" />
        </svg>

        <div class="group-2">
          <div *ngIf="!today" class="_28-de-enero">{{day}} de {{month}}</div>
          <div *ngIf="today" class="_28-de-enero">{{dateTodayCurrent}}</div>
          <div class="rectangle-10"></div>
        </div>

        <svg class="icon3" width="12" height="24" viewBox="0 0 12 24" fill="none" xmlns="http://www.w3.org/2000/svg"
          (click)="nextArrow()">
          <path d="M0 24L12 12L0 0" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <svg class="icon4" width="12" height="24" viewBox="0 0 12 24" fill="none" xmlns="http://www.w3.org/2000/svg"
          (click)="backArrow()">
          <path d="M12 0L1.04907e-06 12L12 24" stroke="white" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>

        <div class="frame-76">
          <div>
            <div class="rectangle-95" id="rectangle95"></div>
            <div class="encargada10">Encargada</div>
            <div class="terapeuta10">Terapeuta</div>
            <div class="tiempo10">Tiempo</div>
            <div class="minutos">Minutos</div>
            <div class="total10">Total</div>
            <div class="tratamiento10">Tratamiento</div>
            <div class="propina10">Propina</div>
            <div class="pago10">Pago</div>
            <div class="cliente10">Cliente</div>
            <div class="a-casa20">A casa</div>
            <div class="a-casa19">A casa</div>
            <div class="a-terapeuta10">A terapeuta</div>
            <div class="a-encargada10">A encargada</div>
            <div class="bebida-casa10">Bebida casa</div>
            <div class="bebida-terap10">Bebida terap</div>
            <div class="tabaco10">Tabaco</div>
            <div class="vitamina10">Vitamina</div>
            <div class="otros10">Otros</div>
            <div class="taxi10">Taxi</div>
          </div>

          <div class="rectangle-94" *ngFor="let services of (servicio | search: filterSearch | paymentMethod: selectedFormPago | therapist: selectedTerapeuta 
            | manager: selectedEncargada | date: dateStart:dateEnd | hourDate: dateStart:hourStart:dateEnd:hourEnd) | 
            paginate: { itemsPerPage: 12, currentPage: page }" (click)="detail(services)">
            <div style="position: relative; top: 0px">
              <div [ngClass]="{'ellipse-18': services?.nota != ''}" (click)="notes()"></div>
              <div class="encargada9">{{services.encargada}}</div>
              <div class="terapeuta9">{{services.terapeuta}}</div>
              <div class="tiempo9">{{services.horaStart}} - {{services.horaEnd}}</div>
              <div class="minuto9">{{services.minuto}} min</div>
              <div class="total9">{{services.totalServicio}} €</div>
              <div class="tratamiento9">{{services.servicio}} €</div>
              <div class="propina9">{{services.propina}} €</div>
              <div class="pago9">{{services.formaPago}}</div>
              <div class="cliente9">{{services.cliente}}</div>
              <div class="a-casa18">{{services.numberPiso1}} €</div>
              <div class="a-casa9">{{services.numberPiso2}} €</div>
              <div class="a-terapeuta9">{{services.numberTerap}} €</div>
              <div class="a-encargada9">{{services.numberEncarg}} €</div>
              <div class="bebida-casa9">{{services.bebidas}} €</div>
              <div class="bebida-terap9">{{services.bebidaTerap}} €</div>
              <div class="tabaco9">{{services.tabaco}} €</div>
              <div class="vitamina9">{{services.vitaminas}} €</div>
              <div class="otros9">{{services.otros}} €</div>
              <div class="taxi9">{{services.taxi}} €</div>
            </div>
          </div>
        </div>

        <pagination-controls class="paginator" previousLabel="" nextLabel=""
          (pageChange)="page = $event"></pagination-controls>

        <div class="component-9">
          <div class="rectangle-18"></div>
          <svg class="icon5 dropdownTotal" width="19" height="9" viewBox="0 0 19 9" fill="none"
            xmlns="http://www.w3.org/2000/svg" (click)="filterTotal()">
            <path d="M-4.76837e-07 -8.30516e-07L9.5 9L19 0" stroke="#0B9A7A" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>

          <div *ngIf="totals" class="dropdownTotal-options">
            <div class="rectangle-115"></div>
            <a class="_min">Tratamiento</a>
            <a class="__2-min">{{totalTreatment}} €</a>
            <div class="_total">Propina </div>
            <div class="_15">{{totalTip}} €</div>
            <div class="_pago">€ A casa</div>
            <div class="_bizum" id="__bizum">{{totalHouse1}} €</div>
            <div class="_salida">€ A Terapeuta</div>
            <div class="salida2">{{totalHouse2}} €</div>
            <div class="_tratamiento">€ A Encargada</div>
            <div class="_152">{{totalTherapist}} €</div>
            <div class="_a-casa">Bebida casa</div>
            <div class="_a-casa2">{{totalManager}} €</div>
            <div class="_153">Bebida Terapeuta</div>
            <div class="_154">{{totalDrinkHouse}} €</div>
            <div class="_a-terapeuta">Tabaco</div>
            <div class="_0">{{totalDrinkTherap}} €</div>
            <div class="_a-encargada">Vitamina</div>
            <div class="_02">{{totalTobacco}} €</div>
            <div class="a-taxista">Propina</div>
            <div class="_03">{{totalVitamin}} €</div>
            <div class="_bebida-casa">Otros</div>
            <div class="_04">{{totalTip}} €</div>
            <div class="_05">{{totalOthers}} €</div>
            <div class="_bebida-terap">Taxi</div>
            <div class="_06">{{totalTaxi}} €</div>
            <div class="_cliente">€ A casa</div>
          </div>
          <div class="total11">Total</div>
          <div class="_370">{{TotalValueLetter}}€</div>
        </div>
      </div>

    </ion-row>
  </ion-grid>
</ion-content>

<!-- Filter -->

<div class="pop-up-filtros" *ngIf="filter">

  <div class="rectangle-30"></div>
  <div class="_filtros">Filtros</div>
  <div class="rectangle_41"></div>

  <svg class="vector-6" width="59" height="2" viewBox="0 0 59 2" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 1L59 0.999995" stroke="#3C3C3C" />
  </svg>

  <div class="limpiar" id="btnDelete" (click)="emptyFilter()">Limpiar</div>
  <div class="filtrar" (click)="close()">Filtrar</div>
  <div class="_terapeuta">Terapeuta</div>
  <div class="inicial">Inicial</div>
  <div class="final">Final</div>
  <div class="_encargada">Encargada</div>

  <div class="m-todo-de-pago">Método de pago</div>

  <div class="group-48">
    <div class="rectangle-412" id="bizum1"></div>
    <ion-input class="rectangle-412" id="Bizum" name="bizum" [(ngModel)]="selectedFormPago"
      (click)="bizum()"></ion-input>
    <div class="bizum">Bizum</div>
  </div>

  <div class="group-49">
    <div class="rectangle-37" id="cash1"></div>
    <ion-input class="rectangle-37" id="cash" name="cash" [(ngModel)]="selectedFormPago" (click)="cash()"></ion-input>
    <div class="_efectivo">Efectivo</div>
  </div>

  <div class="group-50">
    <div class="rectangle-39" id="card1"></div>
    <ion-input class="rectangle-39" id="card" name="card" [(ngModel)]="selectedFormPago" (click)="card()"></ion-input>
    <div class="tarjeta">Tarjeta</div>
  </div>

  <div class="group-51">
    <div class="rectangle-40" id="transaction1"></div>
    <ion-input class="rectangle-40" id="transaction" name="transaction" [(ngModel)]="selectedFormPago"
      (click)="transaction()"></ion-input>
    <div class="transferencia">Transferencia</div>
  </div>

  <div class="component-1">
    <div class="rectangle-4"></div>
    <ion-select class="selecciona" style="display: grid; min-height: -webkit-fill-available" placeholder="Selecciona"
      [(ngModel)]="selectedTerapeuta" (ngModelChange)="filters()">
      <ion-select-option *ngFor="let therapist of terapeuta">{{therapist.nombre}}</ion-select-option>
    </ion-select>
  </div>

  <div class="component-2">
    <div class="rectangle-4"></div>
    <ion-select class="selecciona" style="display: grid; min-height: -webkit-fill-available" placeholder="Selecciona"
      [(ngModel)]="selectedEncargada" (ngModelChange)="filters()">
      <ion-select-option *ngFor="let manager of manager">{{manager.nombre}}</ion-select-option>
    </ion-select>
  </div>

  <svg class="x-close" width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"
    (click)="close()">
    <path d="M20.25 6.75L6.75 20.25M6.75 6.75L20.25 20.25" stroke="#3C3C3C" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round" />
  </svg>

  <svg class="_icon" width="19" height="9" viewBox="0 0 19 9" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M-4.76837e-07 -8.30516e-07L9.5 9L19 0" stroke="#3C3C3C" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round" />
  </svg>

  <svg class="_icon2" width="19" height="9" viewBox="0 0 19 9" fill="none" xmlns="http://www.w3.org/2000/svg"
    (click)="btnFilter()">
    <path d="M-4.76837e-07 -8.30516e-07L9.5 9L19 0" stroke="#3C3C3C" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round" />
  </svg>

  <div class="rectangle-154"></div>
  <ion-input class="rectangle-154" type="date" name="dateStart" [(ngModel)]="dateStart"
    (ngModelChange)="filters()"></ion-input>

  <div class="rectangle-156"></div>
  <ion-input class="rectangle-156" type="date" name="dateEnd" [(ngModel)]="dateEnd"
    (ngModelChange)="filters()"></ion-input>

  <div class="rectangle-155"></div>
  <ion-input class="rectangle-155" type="time" name="hourStart" [(ngModel)]="hourStart"
    (ngModelChange)="filters()"></ion-input>

  <div class="rectangle-157"></div>
  <ion-input class="rectangle-157" type="time" name="hourEnd" [(ngModel)]="hourEnd"
    (ngModelChange)="filters()"></ion-input>
</div>

<!-- Filter Detail -->

<div class="POP-UP-DETAILS" *ngIf="details">
  <div class="overlap-group-wrapper">
    <div class="overlap-group">
      <div class="emily">{{therapisth}}&nbsp;&nbsp; {{hourstart}} - {{hourend}}</div>

      <svg class="x-close_1" width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"
        (click)="closeDetail()">
        <path d="M20.25 6.75L6.75 20.25M6.75 6.75L20.25 20.25" stroke="#3C3C3C" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
      </svg>

      <div class="text-wrapper">Min</div>
      <div class="div">{{minute}} min</div>
      <div class="text-wrapper-2">Total</div>
      <div class="text-wrapper-3">{{total}} €</div>
      <div class="text-wrapper-4">Tratamiento</div>
      <div class="text-wrapper-5">{{treatment}} €</div>
      <div class="text-wrapper-6">Propina</div>
      <div class="text-wrapper-7">{{tip}} €</div>
      <div class="text-wrapper-8">Pago</div>
      <div class="text-wrapper-9">{{payment}}</div>
      <div class="text-wrapper-10">Cliente</div>
      <div class="text-wrapper-11">{{client}}</div>
      <div class="text-wrapper-12">Salida</div>
      <div class="text-wrapper-13">{{exit}}</div>
      <div class="text-wrapper-14">€ A casa</div>
      <div class="text-wrapper-15">{{house1}} €</div>
      <div class="text-wrapper-16">€ A casa</div>
      <div class="text-wrapper-17">{{house2}} €</div>
      <div class="text-wrapper-18">€ A Terapeuta</div>
      <div class="text-wrapper-19">{{therapist}} €</div>
      <div class="text-wrapper-20">€ A Encargada</div>
      <div class="text-wrapper-21">{{manag}} €</div>
      <div class="text-wrapper-22">Bebida casa</div>
      <div class="text-wrapper-23">{{drinkHouse}} €</div>
      <div class="text-wrapper-24">{{drinkTherap}} €</div>
      <div class="text-wrapper-25">Bebida Terapeuta</div>
      <div class="text-wrapper-26">Tabaco</div>
      <div class="text-wrapper-27">{{tabacco}} €</div>
      <div class="text-wrapper-28">Vitamina</div>
      <div class="text-wrapper-29">{{vitamin}} €</div>
      <div class="text-wrapper-30">Otros</div>
      <div class="text-wrapper-31">{{others}} €</div>
      <div class="text-wrapper-32">Taxi</div>
      <div class="text-wrapper-33">{{taxi}} €</div>

      <div class="overlap" (click)="edit()">
        <div class="group">
          <div class="text-wrapper-34">Editar</div>
        </div>
      </div>

      <svg class="vector" width="59" height="2" viewBox="0 0 59 2" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 1L59 0.999995" stroke="#3C3C3C" />
      </svg>

      <div class="text-wrapper-35" (click)="delete(idDetail)">Eliminar</div>
    </div>
  </div>
</div>

<!-- Notas -->

<div class="pop-up-notas" *ngIf="notas">
  <div class="rectangle-86"></div>
  <div class="rectangle-87"></div>
  <div class="anotaci-n">Anotación</div>

  <ion-textarea class="rectangle-88" labelPlacement="floating"
    style="min-height: -webkit-fill-available; overflow: scroll; color: black" [(ngModel)]="serviceModel.nota">
    <div slot="label" class="mensaje">Mensaje... <ion-text color="danger"></ion-text></div>
  </ion-textarea>

  <div class="rectangle-88"></div>
  <div class="editar_1" (click)="updateNote()">Editar</div>
  <!-- <div class="mensaje">Mensaje...</div> -->
  <!-- <div class="_02-02-2024">02/02/2024</div> -->
  <div class="_02-02-2024">{{date}}</div>

  <svg class="x-close_2" width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg"
    (click)="closeNotes()">
    <path d="M20.25 6.75L6.75 20.25M6.75 6.75L20.25 20.25" stroke="#3C3C3C" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round" />
  </svg>

  <!-- <img class="edit-01" src="edit-010.svg" /> -->
  <div class="rectangle-116"></div>
</div>